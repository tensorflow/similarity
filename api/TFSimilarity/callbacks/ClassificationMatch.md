# TFSimilarity.callbacks.ClassificationMatch





Abstract base class for defining the classification matching strategy.

Inherits From: [`ABC`](../../TFSimilarity/distances/ABC.md)


```python
TFSimilarity.callbacks.ClassificationMatch(
    name: str = , canonical_name: str = 
) -> None
```



<!-- Placeholder for "Used in" -->




<!-- Tabular view -->
 <table class="responsive fixed orange">
<colgroup><col width="214px"><col></colgroup>
<tr><th colspan="2"><h2 class="add-link">Attributes</h2></th></tr>

<tr>
<td>
<b>name</b>
</td>
<td>
Name associated with the match object, e.g., match_nearest
</td>
</tr><tr>
<td>
<b>canonical_name</b>
</td>
<td>
The canonical name associated with match strategy,
e.g., match_nearest
</td>
</tr><tr>
<td>
<b>distance_thresholds</b>
</td>
<td>
The max distance below which a nearest neighbor is
considered a valid match. Defaults to None and must be set using
<a href="../../TFSimilarity/callbacks/ClassificationMatch.md#compile">ClassificationMatch.compile()```
</a>.
</td>
</tr><tr>
<td>
<b>count</b>
</td>
<td>
The total number of queries.
</td>
</tr><tr>
<td>
<b>fn</b>
</td>
<td>
The count of False negatives matches.

A False negative match is when the query label == the label generated
by a matcher and the distance to the query is greater than the distance
threshold.
</td>
</tr><tr>
<td>
<b>fp</b>
</td>
<td>
The count of False positive matches.

A False positive match is when the query label != the label generated
by a matcher and the distance to the query is less than the distance
threshold.
</td>
</tr><tr>
<td>
<b>tn</b>
</td>
<td>
The count of True negatives matches.

A True negative match is when the query label != the label generated
by a matcher and the distance to the query is greater than the distance
threshold.
</td>
</tr><tr>
<td>
<b>tp</b>
</td>
<td>
The count of True positive matches.

A True positive match is when the query label == the label generated by
a matcher and the distance to the query is less than the distance
threshold.
</td>
</tr>
</table>



## Methods

<h3 id="compile">compile</h3>

<a target="_blank" class="external" href="https://github.com/tensorflow/similarity/blob/main/tensorflow_similarity/matchers/classification_match.py#L60-L73">View source</a>

```python
compile(
    distance_thresholds: Optional[<a href="../../TFSimilarity/callbacks/FloatTensor.md">TFSimilarity.callbacks.FloatTensor```
</a>] = None
)
```


Configures the distance thresholds used during matching.


<!-- Tabular view -->
 <table class="responsive fixed orange">
<colgroup><col width="214px"><col></colgroup>
<tr><th colspan="2">Args</th></tr>

<tr>
<td>
<b>distance_thresholds</b>
</td>
<td>
The max distance below which a nearest neighbor
is considered a valid match. A threshold of math.inf is used if None
is passed.
</td>
</tr>
</table>



<h3 id="compute_count">compute_count</h3>

<a target="_blank" class="external" href="https://github.com/tensorflow/similarity/blob/main/tensorflow_similarity/matchers/classification_match.py#L162-L201">View source</a>

```python
compute_count(
    query_labels: <a href="../../TFSimilarity/callbacks/IntTensor.md">TFSimilarity.callbacks.IntTensor```
</a>,
    lookup_labels: <a href="../../TFSimilarity/callbacks/IntTensor.md">TFSimilarity.callbacks.IntTensor```
</a>,
    lookup_distances: <a href="../../TFSimilarity/callbacks/FloatTensor.md">TFSimilarity.callbacks.FloatTensor```
</a>
) -> None
```


Computes the match counts at each of the distance thresholds.

This method computes the following at each distance threshold.

* True Positive: The query label matches the derived lookup label and
the derived lookup distance is <= the current distance threshold.

* False Positive: The query label does not match the derived lookup
label but the derived lookup distance is <= the current distance
threshold.

* False Negative: The query label matches the derived lookup label but
the derived lookup distance is > the current distance threshold.

* True Negative: The query label does not match the derived lookup
label and the derived lookup distance is > the current distance
threshold.

Note: compile must be called before calling match.

<!-- Tabular view -->
 <table class="responsive fixed orange">
<colgroup><col width="214px"><col></colgroup>
<tr><th colspan="2">Args</th></tr>

<tr>
<td>
<b>query_labels</b>
</td>
<td>
A 1D array of the labels associated with the queries.
</td>
</tr><tr>
<td>
<b>lookup_labels</b>
</td>
<td>
A 2D array where the jth row is the labels
associated with the set of k neighbors for the jth query.
</td>
</tr><tr>
<td>
<b>lookup_distances</b>
</td>
<td>
A 2D array where the jth row is the distances
between the jth query and the set of k neighbors.
</td>
</tr>
</table>



<h3 id="derive_match">derive_match</h3>

<a target="_blank" class="external" href="https://github.com/tensorflow/similarity/blob/main/tensorflow_similarity/matchers/classification_match.py#L75-L101">View source</a>

```python
derive_match(
    lookup_labels: <a href="../../TFSimilarity/callbacks/IntTensor.md">TFSimilarity.callbacks.IntTensor```
</a>,
    lookup_distances: <a href="../../TFSimilarity/callbacks/FloatTensor.md">TFSimilarity.callbacks.FloatTensor```
</a>
) -> Tuple[<a href="../../TFSimilarity/callbacks/IntTensor.md">TFSimilarity.callbacks.IntTensor``<b>
</a>, <a href="../../TFSimilarity/callbacks/FloatTensor.md">TFSimilarity.callbacks.FloatTensor</b>``
</a>]
```


Derive a match label and distance from a set of K neighbors.

For each query, derive a single match label and distance given the
associated set of lookup labels and distances.

<!-- Tabular view -->
 <table class="responsive fixed orange">
<colgroup><col width="214px"><col></colgroup>
<tr><th colspan="2">Args</th></tr>

<tr>
<td>
<b>lookup_labels</b>
</td>
<td>
A 2D array where the jth row is the labels
associated with the set of k neighbors for the jth query.
</td>
</tr><tr>
<td>
<b>lookup_distances</b>
</td>
<td>
A 2D array where the jth row is the distances
between the jth query and the set of k neighbors.
</td>
</tr>
</table>



<!-- Tabular view -->
 <table class="responsive fixed orange">
<colgroup><col width="214px"><col></colgroup>
<tr><th colspan="2">Returns</th></tr>
<tr class="alt">
<td colspan="2">
A Tuple of FloatTensors:
derived_labels: A FloatTensor of shape
- [len(lookup_labels), 1] where the jth row contains the derived
label for the jth query.

derived_distances: A FloatTensor of shape
- [len(lookup_labels), 1] where the jth row contains the distance
associated with the jth derived label.
</td>
</tr>

</table>



<h3 id="get_config">get_config</h3>

<a target="_blank" class="external" href="https://github.com/tensorflow/similarity/blob/main/tensorflow_similarity/matchers/classification_match.py#L53-L58">View source</a>

```python
get_config()
```







